---
title: Experimentos do Machine Learning Studio (clássico)
description: Use modelos do Machine Learning Studio (clássico) no Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 556b6810db0ed2733a3f086291757bd85b77e371
ms.sourcegitcommit: a9b2cf598f256d07a48bba8617347ee90024a1dd
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/03/2020
ms.locfileid: "4669004"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="deb50-103">Usar modelos baseados no Azure Machine Learning Studio (clássico)</span><span class="sxs-lookup"><span data-stu-id="deb50-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="deb50-104">Os dados unificados no Dynamics 365 Customer Insights são uma fonte para a criação de modelos de machine learning que podem gerar insights de negócios adicionais.</span><span class="sxs-lookup"><span data-stu-id="deb50-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="deb50-105">O Customer Insights integra-se ao Machine Learning Studio (clássico) para usar seus próprios modelos personalizados.</span><span class="sxs-lookup"><span data-stu-id="deb50-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="deb50-106">Para ver como os modelos desenvolvidos no Azure Machine Learning são integrados ao Customer Insights, consulte [Experimentos do Azure Machine Learning](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="deb50-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="deb50-107">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="deb50-107">Prerequisites</span></span>

- <span data-ttu-id="deb50-108">Acesso ao Customer Insights</span><span class="sxs-lookup"><span data-stu-id="deb50-108">Access to Customer Insights</span></span>
- <span data-ttu-id="deb50-109">Ativar assinatura do Azure Enterprise</span><span class="sxs-lookup"><span data-stu-id="deb50-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="deb50-110">Perfis de cliente unificados</span><span class="sxs-lookup"><span data-stu-id="deb50-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="deb50-111">Configuração da [Exportação de entidade para armazenamento de Blob do Azure](export-azure-blob-storage.md)</span><span class="sxs-lookup"><span data-stu-id="deb50-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="deb50-112">Configurar o Machine Learning Studio Classic</span><span class="sxs-lookup"><span data-stu-id="deb50-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="deb50-113">Em uma primeira etapa, precisamos criar um espaço de trabalho e abrir o Machine Learning Studio (clássico).</span><span class="sxs-lookup"><span data-stu-id="deb50-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="deb50-114">Vá para [https://www.portal.azure.com](https://www.portal.azure.com/) e entre.</span><span class="sxs-lookup"><span data-stu-id="deb50-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="deb50-115">Selecione **Criar um recurso**.</span><span class="sxs-lookup"><span data-stu-id="deb50-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="deb50-116">Procure **Espaço de Trabalho do Machine Learning Studio** e selecione **Criar**.</span><span class="sxs-lookup"><span data-stu-id="deb50-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="deb50-117">Insira os detalhes necessários para [criar o espaço de trabalho](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="deb50-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="deb50-118">Escolha o **Tipo de preço do plano do serviço Web** com base na quantidade de dados que você planeja importar.</span><span class="sxs-lookup"><span data-stu-id="deb50-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="deb50-119">Para um melhor desempenho, selecione o **Local** geograficamente mais próximo de você.</span><span class="sxs-lookup"><span data-stu-id="deb50-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="deb50-120">Depois de criar o recurso, o painel da área de trabalho Machine Learning Studio aparecerá.</span><span class="sxs-lookup"><span data-stu-id="deb50-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="deb50-121">Selecione **Lançar Machine Learning Studio**.</span><span class="sxs-lookup"><span data-stu-id="deb50-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Interface do usuário do Azure Machine Learning Studio](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="deb50-123">Trabalhar com o Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="deb50-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="deb50-124">Agora você pode criar um novo experimento ou importar um modelo de experimento existente da galeria de amostra.</span><span class="sxs-lookup"><span data-stu-id="deb50-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="deb50-125">Há experimentos de exemplo para três cenários padrão:</span><span class="sxs-lookup"><span data-stu-id="deb50-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="deb50-126">Previsão de rotatividade</span><span class="sxs-lookup"><span data-stu-id="deb50-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="deb50-127">Valor do tempo de vida do cliente</span><span class="sxs-lookup"><span data-stu-id="deb50-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="deb50-128">Recomendação de produto ou próxima melhor ação</span><span class="sxs-lookup"><span data-stu-id="deb50-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="deb50-129">Se você criar um novo experimento ou usar um modelo de experimento da galeria, será necessário configurar as propriedades **Importar Dados**.</span><span class="sxs-lookup"><span data-stu-id="deb50-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="deb50-130">Use a experiência guiada ou forneça detalhes diretamente para acessar o Armazenamento de Blobs do Azure que contém seus dados.</span><span class="sxs-lookup"><span data-stu-id="deb50-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Experimento do Azure Machine Learning Studio](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="deb50-132">Agora você pode construir um pipeline de processamento personalizado para limpar e pré-processar os dados, extrair recursos e adaptar um modelo adequado.</span><span class="sxs-lookup"><span data-stu-id="deb50-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="deb50-133">Testar e otimizar o desempenho do modelo.</span><span class="sxs-lookup"><span data-stu-id="deb50-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="deb50-134">Quando estiver satisfeito com a qualidade de um modelo, selecione **Configurar serviço Web** > **Serviço Web Preditivo**.</span><span class="sxs-lookup"><span data-stu-id="deb50-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="deb50-135">Esta opção importa o modelo adaptado e o pipeline de caracterização do experimento de treinamento para um serviço preditivo.</span><span class="sxs-lookup"><span data-stu-id="deb50-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="deb50-136">O serviço preditivo pode usar outro conjunto de dados de entrada com o esquema usado no experimento de treinamento para fazer previsões.</span><span class="sxs-lookup"><span data-stu-id="deb50-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Configure um serviço web preditivo](media/predictive-webservice-control.png)

1. <span data-ttu-id="deb50-138">Depois que o experimento de serviço web preditivo for bem-sucedido, você pode implantá-lo para agendamento automático.</span><span class="sxs-lookup"><span data-stu-id="deb50-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="deb50-139">Para que o serviço Web funcione com o Customer Insights, selecione **Implantar Serviço Web** > **Versão Preliminar Implantar Serviço Web [Novo]**.</span><span class="sxs-lookup"><span data-stu-id="deb50-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="deb50-140">[Saiba mais sobre como implantar um serviço Web](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="deb50-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Implantar um serviço Web preditivo](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="deb50-142">Modelos de amostra da galeria</span><span class="sxs-lookup"><span data-stu-id="deb50-142">Sample models from the gallery</span></span>

<span data-ttu-id="deb50-143">Usaremos um cenário fictício do Contoso Hotel para os modelos neste artigo.</span><span class="sxs-lookup"><span data-stu-id="deb50-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="deb50-144">O Contoso Hotel coleta os seguintes dados:</span><span class="sxs-lookup"><span data-stu-id="deb50-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="deb50-145">Dados de CRM que consistem na atividade de estadia do hotel.</span><span class="sxs-lookup"><span data-stu-id="deb50-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="deb50-146">O conjunto de dados inclui informações sobre as datas de estadia de cada cliente cadastrado.</span><span class="sxs-lookup"><span data-stu-id="deb50-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="deb50-147">Ele também contém informações sobre a reserva, tipos de quarto, detalhes de gastos e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="deb50-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="deb50-148">Os dados abrangem quatro anos, de janeiro de 2014 a janeiro de 2018.</span><span class="sxs-lookup"><span data-stu-id="deb50-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="deb50-149">Perfis de clientes dos hóspedes do hotel.</span><span class="sxs-lookup"><span data-stu-id="deb50-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="deb50-150">Esses perfis contêm informações sobre cada cliente, incluindo seu nome, data de nascimento, endereço postal, gênero e número de telefone.</span><span class="sxs-lookup"><span data-stu-id="deb50-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="deb50-151">Utilização de serviços oferecidos pelo hotel, como spa, lavanderia, Wi-Fi ou correio.</span><span class="sxs-lookup"><span data-stu-id="deb50-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="deb50-152">Esta informação é registrada para cada cliente cadastrado.</span><span class="sxs-lookup"><span data-stu-id="deb50-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="deb50-153">Normalmente, o uso dos serviços está relacionado com a estadia.</span><span class="sxs-lookup"><span data-stu-id="deb50-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="deb50-154">Em alguns casos, os serviços podem ser usados pelos clientes sem se hospedar no hotel.</span><span class="sxs-lookup"><span data-stu-id="deb50-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="deb50-155">Análise de Rotatividade</span><span class="sxs-lookup"><span data-stu-id="deb50-155">Churn Analysis</span></span>

<span data-ttu-id="deb50-156">A análise de rotatividade se aplica a diferentes áreas de negócios.</span><span class="sxs-lookup"><span data-stu-id="deb50-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="deb50-157">Neste exemplo, vamos examinar a rotatividade de serviços, especificamente no contexto de serviços de hotel, conforme descrito acima.</span><span class="sxs-lookup"><span data-stu-id="deb50-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="deb50-158">Ele fornece um exemplo prático de um pipeline de modelo de ponta a ponta que pode ser usado como ponto de partida para qualquer outro tipo de modelo de rotatividade.</span><span class="sxs-lookup"><span data-stu-id="deb50-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="deb50-159">Definição de Rotatividade</span><span class="sxs-lookup"><span data-stu-id="deb50-159">Definition of Churn</span></span>

<span data-ttu-id="deb50-160">A definição de rotatividade pode variar de acordo com o cenário.</span><span class="sxs-lookup"><span data-stu-id="deb50-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="deb50-161">Neste exemplo, um hóspede que não visitou o hotel no último ano deve ser rotulado como hóspede com rotatividade.</span><span class="sxs-lookup"><span data-stu-id="deb50-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="deb50-162">O modelo de experimento pode ser importado da galeria.</span><span class="sxs-lookup"><span data-stu-id="deb50-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="deb50-163">Primeiro, importe os dados referentes a **Atividade de Estadia no Hotel**, **Dados do cliente** e **Dados de Uso do Serviço** do Armazenamento de Blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="deb50-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Importar dados para modelo de rotatividade](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="deb50-165">Definição de recursos</span><span class="sxs-lookup"><span data-stu-id="deb50-165">Featurization</span></span>

<span data-ttu-id="deb50-166">Com base na definição de rotatividade, primeiro identificamos as características brutas que influenciarão o rótulo.</span><span class="sxs-lookup"><span data-stu-id="deb50-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="deb50-167">Em seguida, processamos esses recursos brutos em recursos numéricos que podem ser usados com modelos de aprendizado de máquina.</span><span class="sxs-lookup"><span data-stu-id="deb50-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="deb50-168">A integração de dados ocorre no Customer Insights para que possamos unir essas tabelas usando a *ID do Cliente*.</span><span class="sxs-lookup"><span data-stu-id="deb50-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Unir dados importados](media/join-imported-data.png)

<span data-ttu-id="deb50-170">A definição de recursos para construir o modelo para análise de rotatividade pode ser um pouco complicada.</span><span class="sxs-lookup"><span data-stu-id="deb50-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="deb50-171">Os dados são uma função do tempo com novas atividades hoteleiras registradas diariamente.</span><span class="sxs-lookup"><span data-stu-id="deb50-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="deb50-172">Durante a definição de recursos, queremos gerar recursos estáticos a partir dos dados dinâmicos.</span><span class="sxs-lookup"><span data-stu-id="deb50-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="deb50-173">Nesse caso, geramos vários recursos da atividade hoteleira com uma janela deslizante de um ano.</span><span class="sxs-lookup"><span data-stu-id="deb50-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="deb50-174">Também expandimos os recursos categóricos como tipo de quarto ou tipo de reserva em recursos separados usando a codificação one-hot.</span><span class="sxs-lookup"><span data-stu-id="deb50-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="deb50-175">Lista final de recursos:</span><span class="sxs-lookup"><span data-stu-id="deb50-175">Final list of features:</span></span>

| <span data-ttu-id="deb50-176">**Número:**</span><span class="sxs-lookup"><span data-stu-id="deb50-176">**Number**</span></span>  | <span data-ttu-id="deb50-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="deb50-177">**Original_Column**</span></span>          | <span data-ttu-id="deb50-178">**Recursos Derivados**</span><span class="sxs-lookup"><span data-stu-id="deb50-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="deb50-179">1</span><span class="sxs-lookup"><span data-stu-id="deb50-179">1</span></span>           | <span data-ttu-id="deb50-180">Tipo de Sala</span><span class="sxs-lookup"><span data-stu-id="deb50-180">Room Type</span></span>                    | <span data-ttu-id="deb50-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="deb50-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="deb50-182">2</span><span class="sxs-lookup"><span data-stu-id="deb50-182">2</span></span>           | <span data-ttu-id="deb50-183">Tipo de Reserva</span><span class="sxs-lookup"><span data-stu-id="deb50-183">Booking Type</span></span>                 | <span data-ttu-id="deb50-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="deb50-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="deb50-185">3</span><span class="sxs-lookup"><span data-stu-id="deb50-185">3</span></span>           | <span data-ttu-id="deb50-186">Categoria de Viagem</span><span class="sxs-lookup"><span data-stu-id="deb50-186">Travel Category</span></span>              | <span data-ttu-id="deb50-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="deb50-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="deb50-188">4</span><span class="sxs-lookup"><span data-stu-id="deb50-188">4</span></span>           | <span data-ttu-id="deb50-189">Dólares Gastos</span><span class="sxs-lookup"><span data-stu-id="deb50-189">Dollars Spent</span></span>                | <span data-ttu-id="deb50-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="deb50-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="deb50-191">5</span><span class="sxs-lookup"><span data-stu-id="deb50-191">5</span></span>           | <span data-ttu-id="deb50-192">Datas de Check-in e Check-out</span><span class="sxs-lookup"><span data-stu-id="deb50-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="deb50-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="deb50-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="deb50-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="deb50-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="deb50-195">6</span><span class="sxs-lookup"><span data-stu-id="deb50-195">6</span></span>           | <span data-ttu-id="deb50-196">Uso de Serviço</span><span class="sxs-lookup"><span data-stu-id="deb50-196">Service Usage</span></span>                | <span data-ttu-id="deb50-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="deb50-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="deb50-198">Seleção do modelo</span><span class="sxs-lookup"><span data-stu-id="deb50-198">Model selection</span></span>

<span data-ttu-id="deb50-199">Agora precisamos escolher o algoritmo ideal a ser usado.</span><span class="sxs-lookup"><span data-stu-id="deb50-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="deb50-200">Nesse caso, a maioria dos recursos é baseada em recursos categóricos.</span><span class="sxs-lookup"><span data-stu-id="deb50-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="deb50-201">Normalmente, os modelos baseados em árvore de decisão funcionam bem.</span><span class="sxs-lookup"><span data-stu-id="deb50-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="deb50-202">Se houver apenas recursos numéricos, as redes neurais podem ser uma escolha melhor.</span><span class="sxs-lookup"><span data-stu-id="deb50-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="deb50-203">A máquina de vetores de suporte (SVM) também é uma boa opção em tais situações; no entanto, é necessário um pouco de ajuste para extrair o melhor desempenho.</span><span class="sxs-lookup"><span data-stu-id="deb50-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="deb50-204">Escolhemos **Árvore de Decisão Aumentada de Duas Classes** como o primeiro modelo seguido por **SVM de Duas Classes** como o segundo modelo.</span><span class="sxs-lookup"><span data-stu-id="deb50-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="deb50-205">O Azure Machine Learning Studio permite fazer testes A/B, portanto, é benéfico começar com dois modelos, em vez de um.</span><span class="sxs-lookup"><span data-stu-id="deb50-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="deb50-206">A imagem a seguir mostra o pipeline de treinamento e avaliação do modelo do Azure Machine Learning Studio:</span><span class="sxs-lookup"><span data-stu-id="deb50-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Modelo de rotatividade do Azure Machine Learning Studio](media/azure-machine-learning-model.png)

<span data-ttu-id="deb50-208">Também aplicamos uma técnica chamada **Importância do Recurso de Permutação**, um aspecto importante da otimização do modelo.</span><span class="sxs-lookup"><span data-stu-id="deb50-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="deb50-209">Os modelos integrados têm pouco ou nenhum insight sobre o impacto de qualquer recurso específico na previsão final.</span><span class="sxs-lookup"><span data-stu-id="deb50-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="deb50-210">A calculadora de importância de recurso usa um algoritmo personalizado para calcular a influência de recursos individuais no resultado de um modelo específico.</span><span class="sxs-lookup"><span data-stu-id="deb50-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="deb50-211">A importância do recurso é normalizada entre +1 e -1.</span><span class="sxs-lookup"><span data-stu-id="deb50-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="deb50-212">Uma influência negativa significa que o recurso correspondente tem uma influência contra intuitiva no resultado e deve ser removido do modelo.</span><span class="sxs-lookup"><span data-stu-id="deb50-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="deb50-213">Uma influência positiva indica que o recurso está contribuindo fortemente para a previsão.</span><span class="sxs-lookup"><span data-stu-id="deb50-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="deb50-214">Esses valores não são coeficientes de correlação, pois são métricas diferentes.</span><span class="sxs-lookup"><span data-stu-id="deb50-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="deb50-215">Para obter mais informações, consulte [Importância do Recurso de Permutação](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="deb50-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="deb50-216">Todo o [experimento de rotatividade está disponível na Galeria de IA do Azure](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="deb50-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="deb50-217">Previsão do valor do tempo de vida do cliente</span><span class="sxs-lookup"><span data-stu-id="deb50-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="deb50-218">O cálculo do valor da vida útil do cliente (CLTV) é uma das principais métricas que uma empresa pode usar para avaliar e segmentar seus clientes.</span><span class="sxs-lookup"><span data-stu-id="deb50-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="deb50-219">Para a hotelaria, é fundamental conhecer os clientes.</span><span class="sxs-lookup"><span data-stu-id="deb50-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="deb50-220">Por exemplo, compreender os fatores que constituem bons clientes é crucial.</span><span class="sxs-lookup"><span data-stu-id="deb50-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="deb50-221">Isso ajuda a gerência do hotel a avaliar em quais recursos precisa se concentrar e melhorar para satisfazer seus clientes com altos salários.</span><span class="sxs-lookup"><span data-stu-id="deb50-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="deb50-222">Essas decisões podem ter um impacto direto nas vendas e nos ganhos.</span><span class="sxs-lookup"><span data-stu-id="deb50-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="deb50-223">Definição de CLTV</span><span class="sxs-lookup"><span data-stu-id="deb50-223">Definition of CLTV</span></span>

<span data-ttu-id="deb50-224">Para este exemplo, definimos o CLTV de um cliente como o valor total em dólares que ele deve gastar nos próximos 365 dias.</span><span class="sxs-lookup"><span data-stu-id="deb50-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="deb50-225">Usaremos os dados dos últimos três anos de todos os clientes para prever esse valor.</span><span class="sxs-lookup"><span data-stu-id="deb50-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="deb50-226">Definição de recursos</span><span class="sxs-lookup"><span data-stu-id="deb50-226">Featurization</span></span>

<span data-ttu-id="deb50-227">Nesse caso, a definição de recursos vai ser bem parecida com o cenário de rotatividade.</span><span class="sxs-lookup"><span data-stu-id="deb50-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="deb50-228">No entanto, os rótulos e valores previstos são diferentes dos definidos acima.</span><span class="sxs-lookup"><span data-stu-id="deb50-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="deb50-229">Seleção do modelo</span><span class="sxs-lookup"><span data-stu-id="deb50-229">Model selection</span></span>

<span data-ttu-id="deb50-230">A previsão do CLTV é um problema de regressão, pois o valor previsto é uma variável contínua de valor positivo.</span><span class="sxs-lookup"><span data-stu-id="deb50-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="deb50-231">Com base nas propriedades do recurso, selecionamos **Regressão de Árvore de Decisão Aumentada** como um algoritmo e **Regressão de Rede Neural** como outro algoritmo para treinar o modelo.</span><span class="sxs-lookup"><span data-stu-id="deb50-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="deb50-232">Recomendação de produto ou Próxima Melhor Ação</span><span class="sxs-lookup"><span data-stu-id="deb50-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="deb50-233">A recomendação de produto em um cenário de hotel é interpretada como recomendação de serviços oferecidos pelo hotel aos clientes.</span><span class="sxs-lookup"><span data-stu-id="deb50-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="deb50-234">O objetivo é escolher os serviços adequados para os clientes de forma que sua utilização seja maximizada.</span><span class="sxs-lookup"><span data-stu-id="deb50-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="deb50-235">É semelhante às recomendações de filmes para usuários de serviços de streaming de vídeo.</span><span class="sxs-lookup"><span data-stu-id="deb50-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="deb50-236">Definição de Recomendação de Produto ou Próxima Melhor Ação</span><span class="sxs-lookup"><span data-stu-id="deb50-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="deb50-237">Definimos o objetivo como maximizar a quantidade de dólares do uso do serviço, oferecendo os melhores serviços correspondentes aos clientes do hotel de acordo com seus interesses.</span><span class="sxs-lookup"><span data-stu-id="deb50-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="deb50-238">Definição de recursos</span><span class="sxs-lookup"><span data-stu-id="deb50-238">Featurization</span></span>

<span data-ttu-id="deb50-239">Como no modelo de rotatividade, estamos unindo o ServiceCustomerID do hotel e o CustomerID para criar recomendações consistentemente por CustomerID.</span><span class="sxs-lookup"><span data-stu-id="deb50-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Definição de recursos do modelo de recomendação](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="deb50-241">Os dados são originados de três entidades diferentes e os recursos são derivados delas.</span><span class="sxs-lookup"><span data-stu-id="deb50-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="deb50-242">A definição de recursos para o problema de recomendação é diferente em comparação com cenários de rotatividade ou CLTV.</span><span class="sxs-lookup"><span data-stu-id="deb50-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="deb50-243">O modelo de recomendação precisa de dados de entrada na forma de três conjuntos de recursos.</span><span class="sxs-lookup"><span data-stu-id="deb50-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="deb50-244">Seleção do modelo</span><span class="sxs-lookup"><span data-stu-id="deb50-244">Model selection</span></span>

<span data-ttu-id="deb50-245">Prevemos produtos ou serviços usando o algoritmo chamado **Treinar Recomendação do Matchbox** para treinar o modelo de recomendação.</span><span class="sxs-lookup"><span data-stu-id="deb50-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Algoritmo de recomendação do produto](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="deb50-247">As três portas de entrada para o modelo **Treinar Recomendação do Matchbox** incluem os dados de uso do serviço de treinamento, a descrição do cliente (opcional) e a descrição do serviço.</span><span class="sxs-lookup"><span data-stu-id="deb50-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="deb50-248">Há três maneiras diferentes de pontuar o modelo.</span><span class="sxs-lookup"><span data-stu-id="deb50-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="deb50-249">Uma é para avaliação do modelo em que uma pontuação de Ganho Cumulativo com Desconto Normalizado (NDCG) é calculada para classificar os itens avaliados.</span><span class="sxs-lookup"><span data-stu-id="deb50-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="deb50-250">Neste experimento, temos a pontuação NDCG de 0,97.</span><span class="sxs-lookup"><span data-stu-id="deb50-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="deb50-251">As outras duas opções são pontuar o modelo em todo o catálogo de serviços recomendáveis ou pontuar apenas em itens que os usuários não usaram antes.</span><span class="sxs-lookup"><span data-stu-id="deb50-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="deb50-252">Olhando mais adiante nas distribuições das recomendações em todo o catálogo de serviços, notamos que telefone, WiFi e correio são os principais serviços a serem recomendados.</span><span class="sxs-lookup"><span data-stu-id="deb50-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="deb50-253">Isso é consistente com o que descobrimos nas distribuições dos dados de consumo de serviço:</span><span class="sxs-lookup"><span data-stu-id="deb50-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Saída do modelo de recomendação](media/azure-machine-learning-model-output.png)

<span data-ttu-id="deb50-255">Todo o [experimento de recomendação de produto pode ser acessado na Galeria de IA do Azure.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="deb50-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="deb50-256">Integrar modelos personalizados</span><span class="sxs-lookup"><span data-stu-id="deb50-256">Integrate custom models</span></span>

<span data-ttu-id="deb50-257">Para usar essas previsões no Customer Insights, você precisa **exportar** as previsões junto com as IDs dos clientes.</span><span class="sxs-lookup"><span data-stu-id="deb50-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="deb50-258">[Exporte-as para o mesmo local de Armazenamento de Blobs do Azure](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) para o qual você exporta os dados de origem.</span><span class="sxs-lookup"><span data-stu-id="deb50-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="deb50-259">O serviço web preditivo pode ser planejado para ser executado regularmente e atualizar as pontuações.</span><span class="sxs-lookup"><span data-stu-id="deb50-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="deb50-260">Os dados gerados pelo modelo personalizado podem ser usados para enriquecer ainda mais os dados dos clientes.</span><span class="sxs-lookup"><span data-stu-id="deb50-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="deb50-261">Para obter mais informações, consulte [Modelos personalizados de aprendizado de máquina](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="deb50-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>
